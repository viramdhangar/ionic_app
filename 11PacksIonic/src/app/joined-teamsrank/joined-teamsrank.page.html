<ion-header>
  <ion-toolbar color="tertiary">
    <ion-buttons slot="start">
      <ion-back-button routerLink="/myjoinedleagues/{{uniqueNumber}}/{{matchId}}/{{matchStatus}}"></ion-back-button>
    </ion-buttons>
    <ion-title style="font-size: 80%;">{{match.formattedTeamName}}</ion-title>
  </ion-toolbar>
  <ion-toolbar color="grey" style="text-align:center">
    <ion-title *ngIf="match.days !== 0 && matchStatus == 'UPCOMING'"
      style="display: flex; align-items: left; justify-content: left; font-size: 80%; color:green">
      {{match.days}}d {{match.hours!}}h {{match.minutes}}m {{match.seconds}}s
    </ion-title>
    <ion-title *ngIf="match.days == 0 && matchStatus == 'UPCOMING'"
      style="display: flex; align-items: left; justify-content: left; font-size: 80%; color:green">
      {{match.hours!}}h {{match.minutes}}m {{match.seconds}}s
    </ion-title>
    <ion-title *ngIf="matchStatus == 'LIVE'"
      style="display: flex; align-items: left; justify-content: left; font-size: 70%; color:green">
      LIVE LEAGUE
    </ion-title>
    <ion-title *ngIf="matchStatus == 'COMPLETED'"
      style="display: flex; align-items: left; justify-content: left; font-size: 70%; color:green">
      COMPLETED LEAGUE
    </ion-title>
    <ion-title *ngIf="matchStatus == 'UPCOMING'"
      style="display: flex; align-items: left; justify-content: left; font-size: 70%; color:blue">
      UPCOMING LEAGUE
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-refresher #refresherRef slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>

  <ion-card style="border-radius: 10px;">
    <ion-grid>
      <ion-row>
        <ion-col style="text-align:left; padding-top: 1%">
          <font color="grey" size="2%">Group Prize</font><br />
          <font color="green" size="4%"><b>&#8377; {{league.winningAmount}}</b></font>
        </ion-col>
      </ion-row>
      <div
        style="margin: 5px 1%;width: 96%;padding: 0px;text-align: center;background-color: #f4f4f4;border: #fff;border-radius: 10px;">
        <div
          style="min-width: 15%;height: 3px;white-space: nowrap;overflow: hidden;padding: 0px;border-radius: 10px;background-color: purple;"
          *ngIf="league.progress !==0" [style.width]="league.progress + '%'">
          {{league.progress}}%
        </div>
      </div>

      <ion-row>
        <ion-col style="text-align:left; padding-top: 1%; font-size: 80%">
          <font color="grey" size="1%">size</font><br />
          <b>{{league.joinedTeam}}/{{league.size}}</b>
        </ion-col>
        <ion-col style="text-align:center; padding-top: 1%; font-size: 80%; color: rgb(196, 23, 23)">
          <font color="grey" size="1%">Entry</font><br />
          <b>&#8377; {{league.entryFee}}</b>
        </ion-col>
        <ion-col style="text-align:center; padding-top: 1%; font-size: 80%">
          <font color="grey" size="1%">WINNERS</font><br />
          <a (click)="presentModal(league.breakupId)"><b>{{league.winners}}</b></a>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
  <div *ngFor="let team of joinedTeams">
    <ion-list *ngIf="matchStatus == 'LIVE' || matchStatus == 'COMPLETED'">
      <ion-item routerLink="/teamView/{{uniqueNumber}}/{{matchId}}/{{team.teamId}}/{{league.id}}/{{matchStatus}}">
        <ion-label style="text-align: left; font-size: 12px">
          <font color="grey" size="1%">POS</font><br />
          <b>{{team.teamRank}}</b>
        </ion-label>
        <ion-label style="text-align: center; font-size: 12px">
          <font color="grey" size="1%">USER</font><br />
          <b>{{team.firstName}}({{team.teamName}})</b>
        </ion-label>
        <ion-label style="text-align: right; font-size: 12px">
          <font color="grey" size="1%">POINTS</font><br />
          <b *ngIf="team.winningAmount !== null" style="color: green; text-align: right">
            <ion-icon name="trophy" color="success"></ion-icon>
            &#x20b9; {{team.winningAmount}} &nbsp;&nbsp;&nbsp;
          </b><b>{{team.points}}</b>
        </ion-label>
      </ion-item>
    </ion-list>
    <ion-list *ngIf="matchStatus !== 'LIVE' && matchStatus !== 'COMPLETED'">
      <ion-item *ngIf="team.createdId == uniqueNumber"
        routerLink="/teamView/{{uniqueNumber}}/{{matchId}}/{{team.teamId}}/{{league.id}}/{{matchStatus}}">
        <ion-label style="text-align: left; font-size: 12px">
          <font color="grey" size="1%">POS</font><br />
          <b>{{team.teamRank}}</b>
        </ion-label>
        <ion-label style="text-align: center; font-size: 12px">
          <font color="grey" size="1%">USER</font><br />
          <b>{{team.firstName}}({{team.teamName}})</b>
        </ion-label>
        <ion-label style="text-align: right; font-size: 12px">
          <font color="grey" size="1%">POINTS</font><br />
          <b>{{team.points}}</b>
        </ion-label>
      </ion-item>
      <ion-item *ngIf="team.createdId != uniqueNumber">
        <ion-label style="text-align: left; font-size: 12px">
          <font color="grey" size="1%">POS</font><br />
          <b>{{team.teamRank}}</b>
        </ion-label>
        <ion-label style="text-align: center; font-size: 12px">
          <font color="grey" size="1%">USER</font><br />
          <b>{{team.firstName}}({{team.teamName}})</b>
        </ion-label>
        <ion-label style="text-align: right; font-size: 12px">
          <font color="grey" size="1%">POINTS</font><br />
          <b>{{team.points}}</b>
        </ion-label>
      </ion-item>
    </ion-list>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-buttons>
      <ion-button routerLink="/tabs/tabs/matches" style="text-align:center">
        <ion-icon name="home"></ion-icon><br />
        <p style="font-size: 11px">Matches</p>
      </ion-button>
      <ion-button routerLink="/tabs/tabs/tab2/{{uniqueNumber}}" style="text-align:center">
        <ion-icon name="trophy"></ion-icon><br />
        <p style="font-size: 11px">Joined Matches</p>
      </ion-button>
      <ion-button routerLink="/tabs/tabs/tab3" style="text-align:center">
        <ion-icon name="more"></ion-icon><br />
        <p style="font-size: 11px">More</p>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>